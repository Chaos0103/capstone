<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header" />
<head>
    <!--우편번호 api-->
    <script th:src="@{//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js}"></script>
    <script type="text/javascript" th:src="@{/js/address_number.js}"></script>
    <style>
        .field-error {
            border-color: #dc3545;
            color: #dc3545;
        }
    </style>
    <link rel = "stylesheet" th:href="@{/css/test.css}">
</head>

<body>
<!-- Top -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-5">
    <div class="container px-5">
        <div th:replace="fragments/bodyTopLogo :: bodyTopLogo"/>
    </div>
</nav>

    <!--단계 표시-->
    <header class="container mb-4">
        <h1 class="text-center">회원가입</h1><br><br>
<!--        <p class="text-center">현재 회원 가입 페이지입니다.<br> <strong> 가입 정보가 미흡한 경우, 다음 단계로 진행이 불가합니다.</strong></p><br>-->
<!--        <div class="progress" style="height: 30px;">-->
<!--            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="99"-->
<!--                aria-valuemin="0" aria-valuemax="100" style="width:99%">-->
<!--                진행률 99%-->
<!--            </div>-->
<!--        </div>-->
    </header>

<div class="content-body">
    <div class="container">
        <div class="join join4">
            <div class="step login-step d-up-lg">
                <ol>
                    <li>
                        <div class="box">약관동의 하기</div>
                    </li>
                    <li>
                        <div class="box">본인인증 하기</div>
                    </li>
                    <li class="on">
                        <div class="box">정보입력 하기</div>
                    </li>
                    <li>
                        <div class="box">회원가입 완료</div>
                    </li>
                </ol>
            </div>
        </div>
    </div>
</div>
    <!--Register Section-->
    <section>
        <div class="container">
            <div class="row">
                <div class="col-sm-9 col-md-7 col-lg-6 mx-auto">
                    <div class="card my-5">
                        <div class="card-body">
                            <form class="needs-validation" method="post" novalidate th:action th:object="${patient}">

                                <!-- 글로벌 오류 메세지 -->
                                <div th:if="${#fields.hasGlobalErrors()}" class="text-center mb-4">
                                    <p class="field-error" th:each="err : ${#fields.globalErrors()}"
                                       th:text="${err}">전체 오류 메시지</p>
                                </div>

                                <div class="mb-4">
                                    <label class="form-label" for="id">아이디</label>
                                    <div class = "input-group">
                                        <input type="text" id="id" th:field="*{loginId}" class="form-control" pattern="^[A-za-z0-9]{4,12}$"
                                            aria-describedby="addon1" required autofocus>
                                        <button class="btn btn-outline-primary" type = "button" id = "addon1">중복 확인</button>
                                    </div>
                                    <div class="valid-feedback">
                                        아이디 형식이 올바릅니다.
                                    </div>
                                    <div class="invalid-feedback">
                                        영문 소문자 4~12자 사이로 입력해주세요.
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6">
                                        <label class="form-label" for="pwd">비밀번호</label>
                                        <input type="password" id="pwd" th:field="*{loginPw}" class="form-control"
                                            pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,16}$"
                                            required autofocus>
                                        <div class="valid-feedback">
                                            비밀번호 형식이 올바릅니다.
                                        </div>
                                        <div class="invalid-feedback">
                                            최소 8자리에서 최대 16자리까지 숫자, 영문, 특수문자 각 1개 이상 포함해주세요.
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-4">
                                        <label class="form-label" for="pwdCheck">비밀번호확인</label>
                                        <input type="password" id="pwdCheck" th:field="*{checkPw}" class="form-control"
                                            pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,16}$"
                                            required autofocus>
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <label class="form-label" for="name">이름</label>
                                    <input type="text" id="name" th:field="*{name}" class="form-control" required autofocus>
                                </div>

                                <div class="row">
                                    <label class="form-label" for="human-number">주민등록번호</label>

                                    <div class="col-md-6">
                                        <input type="text" id="human-number" th:field="*{rrnFront}" class="form-control"
                                            placeholder="생년월일 YYMMDD"
                                            pattern="^(?:[0-9]{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[1,2][0-9]|3[0,1])$"
                                            required autofocus>
                                        <div class="valid-feedback">
                                            주민등록번호 형식이 올바릅니다.
                                        </div>
                                        <div class="invalid-feedback">
                                            주민등록번호 형식이 올바르지않습니다.
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-4">
                                        <input type="password" id="human-number" th:field="*{rrnBack}" class="form-control"
                                            placeholder="주민번호 뒷 7자리" pattern="[1-4]\d{6}$" required autofocus>
                                        <div class="valid-feedback">
                                            주민등록번호 형식이 올바릅니다.
                                        </div>
                                        <div class="invalid-feedback">
                                            주민등록번호 형식이 올바르지않습니다.
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="form-label" for="phone-number">연락처</label>

                                    <div class="input-group mb-4">
                                        <input type="text" id="phone-number1" th:field="*{phoneNumberFront}" class="form-control" >
                                        <span class="input-group-text">-</span>
                                        <input type="text" id="phone-number2" th:field="*{phoneNumberMid}" class="form-control" >
                                        <span class='input-group-text'>-</span>
                                        <input type="text" id="phone-number3" th:field="*{phoneNumberBack}" class="form-control" >
                                    </div>
                                </div>

                                <div class="row">
                                    <label class="form-label" for="post-number">우편번호</label>

                                    <div class="input-group mb-4 col-md-6">
                                        <input type="text" id="post-number" th:field="*{zipcode}" class="form-control" placeholder="05006"
                                            aria-describedby="addonPost" >
                                        <button class="btn btn-outline-primary" type = "button" id = "addonPost" onclick="postcode()">우편번호검색</button>
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <label class="form-label" for="address">주소</label>
                                    <input type="text" id="address" th:field="*{city}" class="form-control" placeholder="ex) 서울특별시 광진구 능동로">
                                </div>

                                <div class="mb-4">
                                    <label class="form-label" for="detail-address">상세주소</label>
                                    <input type="text" id="detail-address" th:field="*{street}" class="form-control" required autofocus>
                                </div>

                                <div class="text-center mb-4">
                                    <button class="btn btn-lg btn-primary btn-block text-uppercase" type="submit">회원가입</button>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--이전 버튼-->
    <div class="text-center mb-4">
        <button class="btn btn-light" type="button" th:onclick="|location.href='@{/join/patient/phoneCheck}'|">이전</button>
    </div>

<!-- Footer-->
<div th:replace="fragments/footer :: footer"/>

    <!--form validation js-->
<!--    <script>-->
<!--        // Example starter JavaScript for disabling form submissions if there are invalid fields-->
<!--        (function () {-->
<!--            'use strict'-->

<!--            // Fetch all the forms we want to apply custom Bootstrap validation styles to-->
<!--            var forms = document.querySelectorAll('.needs-validation')-->

<!--            // Loop over them and prevent submission-->
<!--            Array.prototype.slice.call(forms)-->
<!--                .forEach(function (form) {-->
<!--                    form.addEventListener('submit', function (event) {-->
<!--                        if (!form.checkValidity()) {-->
<!--                            event.preventDefault()-->
<!--                            event.stopPropagation()-->
<!--                        }-->

<!--                        form.classList.add('was-validated')-->
<!--                    }, false)-->
<!--                })-->
<!--        })()-->
<!--    </script>-->
</body>
</html>